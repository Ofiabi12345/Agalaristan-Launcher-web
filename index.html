<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Agalaristan Network | Market & 3D Önizleme</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://bundle.run/skinview3d@3.0.0"></script>
    <style>
        :root { --vurgu: #00d2ff; --altin: #ffcf40; --arkaplan: rgba(10, 10, 15, 0.95); }
        body { margin: 0; font-family: 'Poppins', sans-serif; color: white; background: url('https://images.unsplash.com/photo-1627398242454-45a1465c2479?auto=format&fit=crop&w=1920&q=80') no-repeat center center fixed; background-size: cover; overflow-x: hidden; }
        
        .overlay { background: var(--arkaplan); min-height: 100vh; backdrop-filter: blur(10px); }

        /* Navbar */
        nav { display: flex; justify-content: space-between; align-items: center; padding: 20px 8%; border-bottom: 2px solid var(--vurgu); background: rgba(0,0,0,0.5); }
        .logo { font-size: 28px; font-weight: 900; letter-spacing: 3px; color: var(--vurgu); text-shadow: 0 0 10px var(--vurgu); }
        .nav-links a { color: white; text-decoration: none; margin-left: 20px; font-size: 14px; font-weight: bold; cursor: pointer; }

        /* Giriş/Kayıt Modal */
        #authModal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); }
        .modal-content { background: #15151b; margin: 5% auto; padding: 30px; border: 2px solid var(--vurgu); width: 350px; border-radius: 20px; text-align: center; }
        .modal-content input { width: 90%; padding: 12px; margin: 10px 0; background: #222; border: 1px solid #444; color: white; border-radius: 8px; }
        .modal-content button { width: 100%; padding: 12px; background: var(--vurgu); border: none; font-weight: bold; cursor: pointer; border-radius: 8px; margin-top: 10px; }

        /* Pelerin Önizleme Bölümü */
        .preview-container { margin: 40px auto; width: 80%; background: rgba(255,255,255,0.03); border-radius: 20px; padding: 20px; border: 1px dashed var(--vurgu); display: flex; flex-direction: column; align-items: center; }
        #skin-viewer { width: 300px; height: 400px; }
        .preview-controls { margin-top: 15px; }

        /* Market */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; padding: 40px 10%; }
        .card { background: rgba(255, 255, 255, 0.05); border-radius: 20px; padding: 20px; border: 1px solid rgba(255,255,255,0.1); text-align: center; transition: 0.3s; }
        .card:hover { border-color: var(--vurgu); transform: translateY(-5px); }
        .price { font-size: 28px; color: #2ecc71; font-weight: bold; margin: 15px 0; }
        .buy-btn { background: var(--vurgu); color: black; padding: 10px 25px; border-radius: 50px; text-decoration: none; font-weight: bold; display: inline-block; cursor: pointer; }

        #owner-bar { display: none; background: #e74c3c; color: white; text-align: center; padding: 10px; font-weight: bold; position: fixed; top: 0; width: 100%; z-index: 1001; }
    </style>
</head>
<body>

<div id="owner-bar">SAHİP YETKİSİ AKTİF: HOŞ GELDİN OFİABİ123!</div>

<div id="authModal">
    <div class="modal-content">
        <div id="login-box">
            <h2>Giriş Yap</h2>
            <input type="text" id="user" placeholder="Kullanıcı Adı">
            <input type="password" id="pass" placeholder="Şifre">
            <button onclick="handleLogin()">Giriş Yap</button>
            <p onclick="toggleAuth()" style="cursor:pointer; font-size:12px; color:#888; margin-top:10px;">Hesabın yok mu? Kayıt Ol</p>
        </div>
        <div id="register-box" style="display:none;">
            <h2>Kayıt Ol</h2>
            <input type="text" id="reg-user" placeholder="Kullanıcı Adı Seç">
            <input type="password" id="reg-pass" placeholder="Şifre Oluştur">
            <button onclick="handleRegister()">Kayıt Ol</button>
            <p onclick="toggleAuth()" style="cursor:pointer; font-size:12px; color:#888; margin-top:10px;">Giriş Yap</p>
        </div>
        <p onclick="document.getElementById('authModal').style.display='none'" style="cursor:pointer; font-size:12px; margin-top:10px;">Kapat</p>
    </div>
</div>

<div class="overlay">
    <nav>
        <div class="logo">AGALARİSTAN</div>
        <div class="nav-links">
            <a onclick="document.getElementById('authModal').style.display='block'" id="userDisplay">GİRİŞ / KAYIT</a>
        </div>
    </nav>

    <div style="text-align:center; margin-top:30px;">
        <h2>3D PELERİN ÖNİZLEME</h2>
        <p style="font-size:12px; color:var(--vurgu);">İsmini yaz ve pelerinini üzerinde gör!</p>
    </div>

    <div class="preview-container">
        <div id="skin-viewer"></div>
        <div class="preview-controls">
            <input type="text" id="skin-name" placeholder="Minecraft İsmin" style="padding:8px; border-radius:5px; border:none;">
            <button onclick="updateSkin()" style="padding:8px; background:var(--vurgu); border:none; border-radius:5px; font-weight:bold; cursor:pointer;">Sola Göster</button>
        </div>
    </div>

    <div class="grid">
        <div class="card">
            <i class="fas fa-dragon" style="font-size:40px; color:#e74c3c;"></i>
            <h3>Ejderha Pelerini</h3>
            <p>Sırtında efsanevi durur!</p>
            <div class="price" id="p1">75 AG</div>
            <div class="buy-btn" onclick="applyCape('https://piskel-imgstore-b.appspot.com/img/934e892c-567e-11eb-9b43-29471f49615e.png')">ÜSTÜNDE DENE</div>
        </div>
        <div class="card">
            <i class="fas fa-bolt" style="font-size:40px; color:#f1c40f;"></i>
            <h3>Şimşek Pelerini</h3>
            <p>Hız tutkunları için.</p>
            <div class="price" id="p2">75 AG</div>
            <div class="buy-btn" onclick="applyCape('https://piskel-imgstore-b.appspot.com/img/76977464-567e-11eb-9114-29471f49615e.png')">ÜSTÜNDE DENE</div>
        </div>
    </div>
</div>

<script>
    // 3D Skin Viewer Kurulumu
    let skinViewer = new skinview3d.SkinViewer({
        canvas: document.getElementById("skin-viewer"),
        width: 300,
        height: 400,
        skin: "https://mineskin.org/render/head/Ofiabi123" // Varsayılan skin
    });

    skinViewer.zoom = 0.8;
    skinViewer.autoRotate = true;
    skinViewer.animation = new skinview3d.WalkingAnimation();

    function updateSkin() {
        const name = document.getElementById('skin-name').value;
        if(name) {
            skinViewer.loadSkin(`https://mineskin.org/render/head/${name}`);
        }
    }

    function applyCape(capeUrl) {
        skinViewer.loadCape(capeUrl);
        alert("Pelerin 3D model üzerine uygulandı! Çevirip bakabilirsin.");
    }

    // Giriş Kayıt Fonksiyonları
    function toggleAuth() {
        const l = document.getElementById('login-box');
        const r = document.getElementById('register-box');
        l.style.display = l.style.display === 'none' ? 'block' : 'none';
        r.style.display = r.style.display === 'none' ? 'block' : 'none';
    }

    function handleLogin() {
        const u = document.getElementById('user').value;
        const p = document.getElementById('pass').value;

        if(u === "Ofiabi123" && p === "1st2nd3rdAzaZ") {
            document.getElementById('owner-bar').style.display = "block";
            document.getElementById('userDisplay').innerText = "SAHİP: " + u;
            document.getElementById('authModal').style.display = "none";
            document.getElementById('p1').innerText = "0 AG";
            document.getElementById('p2').innerText = "0 AG";
            // Otomatik olarak kendi skinini yükle
            skinViewer.loadSkin(`https://mineskin.org/render/head/${u}`);
        } else {
            alert("Hatalı giriş!");
        }
    }
</script>

</body>
</html>